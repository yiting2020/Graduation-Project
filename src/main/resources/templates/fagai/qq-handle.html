
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>重点项目库</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="../../assets/images/favicon.ico" th:href="@{../assets/images/favicon.ico}">

    <!-- App css -->
    <link href="../../assets/css/bootstrap.min.css" th:href="@{../assets/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
    <link href="../../assets/css/icons.css" th:href="@{../assets/css/icons.css}"  rel="stylesheet" type="text/css" />
    <link href="../../assets/css/metismenu.min.css" th:href="@{../assets/css/metismenu.min.css}" rel="stylesheet" type="text/css" />
    <link href="../../assets/css/style.css" th:href="@{../assets/css/style.css}" rel="stylesheet" type="text/css" />

    <!--此处引用全局性的css文件-->
    <link type="text/css" rel="stylesheet" href="../../assets/css/Site.css"th:href="@{../assets/css/Site.css}">

    <link type="text/css" rel="stylesheet" href="../../assets/css/style.css"th:href="@{../assets/css/style.css}">

    <!--此处引用全局性script文件-->
    <script type="text/javascript" src="../../assets/scripts/jquery-1.12.4.min.js"th:href="@{../assets/scripts/jquery-1.12.4.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.core.min.js"th:href="@{../assets/scripts/UI/ui.core.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/Page/ui.masterpage.js"th:href="@{../assets/scripts/Page/ui.masterpage.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/Page/ui.messagebox.js"th:href="@{../assets/scripts/Page/ui.messagebox.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/jquery.validate.min.js"th:href="@{../assets/scripts/jquery.validate.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.validate.js"th:href="@{../assets/scripts/UI/ui.validate.js}"></script>

    <script type="text/javascript" src="../../assets/scripts/Page/ui.menu.js"th:href="@{../assets/scripts/Page/ui.menu.js}"></script>
    <link type="text/css" rel="stylesheet" href="../../assets/css/Menu.css" th:href="@{../assets/css/Menu.css}">
    <script type="text/javascript" src="../../assets/scripts/UI/ui.contentWindow.min.js" th:href="@{../assets/scripts/UI/ui.contentWindow.min.js}"></script>
    <link type="text/css" rel="stylesheet" href="../../assets/themes/metro/ui.metro.contentWindow.css" th:href="@{../assets/themes/metro/ui.metro.contentWindow.css}">

    <script type="text/javascript" src="../../assets/scripts/UI/ui.columnStyle.min.js" th:href="@{../assets/scripts/UI/ui.columnStyle.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.gridview.min.js" th:href="@{../assets/scripts/UI/ui.gridview.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.tools.min.js" th:href="@{../assets/scripts/UI/ui.tools.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.dateChooser.min.js" th:href="@{../assets/scripts/UI/ui.dateChooser.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.contentWindow.min.js" th:href="@{../assets/scripts/UI/ui.contentWindow.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.selectionTree.min.js" th:href="@{../assets/scripts/UI/ui.selectionTree.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.selectionList.min.js" th:href="@{../assets/scripts/UI/ui.selectionList.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/jquery.validate.min.js" th:href="@{../assets/scripts/jquery.validate.min.js}"></script>
    <script type="text/javascript" src="../../assets/scripts/UI/ui.validate.js" th:href="@{../assets/scripts/UI/ui.validate.js}"></script>

    <link type="text/css" rel="stylesheet" href="../../assets/themes/metro/ui.metro.gridview.css" th:href="@{../assets/themes/metro/ui.metro.gridview.css}">
    <link type="text/css" rel="stylesheet" href="../../assets/themes/metro/ui.metro.tools.css" th:href="@{../assets/themes/metro/ui.metro.tools.css}">
    <link type="text/css" rel="stylesheet" href="../../assets/themes/metro/ui.metro.dateChooser.css" th:href="@{../assets/themes/metro/ui.metro.dateChooser.css}">
    <link type="text/css" rel="stylesheet" href="../../assets/themes/metro/ui.metro.contentWindow.css" th:href="@{../assets/themes/metro/ui.metro.contentWindow.css}">
    <link type="text/css" href="../../assets/themes/metro/ui.metro.selectionTree.css" th:href="@{../assets/themes/metro/ui.metro.selectionTree.css}" rel="stylesheet">
    <link type="text/css" href="../../assets/themes/metro/ui.metro.selectionList.css" th:href="@{../assets/themes/metro/ui.metro.selectionList.css}" rel="stylesheet">
    <style id="GlobalThemeChangeStyle" type="text/css"></style>
    <!-- 项目全局样式 -->
    <link type="text/css" rel="stylesheet" href="../../assets/css/Project.css" th:href="@{../assets/css/Project.css}">
    <!-- 主题色样式 -->
    <link id="theme" type="text/css" rel="stylesheet" href="../../assets/themes/metro.color/ui.metro.Default.css" th:href="@{../assets/themes/metro.color/ui.metro.Default.css}">
    <link id="theme" type="text/css" rel="stylesheet" href="../../assets/css/style.css" th:href="@{../assets/css/style.css}">
    <script role="reload" type="text/javascript" src="../../assets/scripts/biz/project-reserves.js" th:href="@{../assets/scripts/biz/project-reserves.js}"></script>
    <script src="../../assets/js/modernizr.min.js" th:href="@{../assets/js/modernizr.min.js}"></script>
    <style>
        ::-webkit-scrollbar{
            display: none;
        }
    </style>
</head>


<body>

<!-- Begin page -->
<div id="wrapper">

    <!-- Top Bar Start -->
    <div class="topbar" style="background: linear-gradient(to top, rgb(87, 194, 1),rgb(87, 194, 1));">

        <!-- LOGO -->
        <div class="topbar-left" style="background: linear-gradient(to top, rgb(87, 194, 1),rgb(87, 194, 1));">
            <a href="index-fg.html" class="logo">
                <!--<span>
                    <img src="../../assets/images/logo.png" th:href="@{../assets/css/metismenu.min.css}" alt="" height="16">
                </span>
                <i>
                    <img src="../../assets/images/logo_sm.png" th:href="@{../assets/css/metismenu.min.css}" alt="" height="28">
                </i>-->
            </a>
        </div>

        <nav class="navbar-custom" style="background: linear-gradient(to top, rgb(87, 194, 1),rgb(87, 194, 1));">


        <ul class="list-unstyled topbar-right-menu float-right mb-0">



                <li class="dropdown notification-list">
                    <a class="nav-link dropdown-toggle waves-effect waves-light nav-user" data-toggle="dropdown" href="#" role="button"
                       aria-haspopup="false" aria-expanded="false">
                        <img src="../../assets/images/users/avatar-1.jpg" th:href="@{../assets/images/users/avatar-1.jpg}" alt="user" class="rounded-circle">
                        <span class="ml-1" th:text="${session.loginuser.username}"> <i class="mdi mdi-chevron-down"></i> </span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right profile-dropdown ">
                        <!-- item-->
                        <div class="dropdown-item noti-title">
                            <h6 class="text-overflow m-0">欢迎 !</h6>
                        </div>

                        <!-- item-->
                        <a href="javascript:void(0);" th:href="@{/exit}" class="dropdown-item notify-item">
                            <i class="fi-power"></i> <span>注销</span>
                        </a>

                    </div>
                </li>

            </ul>

            <ul class="list-inline menu-left mb-0">
                <li class="float-left">
                    <button class="button-menu-mobile open-left waves-light waves-effect">
                        <i class="dripicons-menu"></i>
                    </button>
                </li>

            </ul>

        </nav>

    </div>
    <!-- Top Bar End -->


    <!-- ========== Left Sidebar Start ========== -->
    <div class="left side-menu">
        <div class="slimscroll-menu" id="remove-scroll">

            <!--- Sidemenu -->
            <div id="sidebar-menu">
                <!-- Left Menu Start -->
                <ul class="metismenu" id="side-menu">
                    <li class="menu-title">Important</li>
                    <li>
                        <a href="index-fg.html" th:href="@{/fagai/index-fg}">
                            <i class="fi-air-play"></i>
                            <!--<span class="badge badge-danger badge-pill pull-right">3</span>-->
                            <span> 首页 </span>
                        </a>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-briefcase"></i> <span> 项目审核 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a href="sh-none.html" th:href="@{/fagai/sh-none}">未审核项目</a></li>
                            <li><a href="sh-over.html" th:href="@{/fagai/sh-over}">已审核项目</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-box"></i> <span> 项目入库 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level nav" aria-expanded="false">
                            <li><a href="rk-ready.html" th:href="@{/fagai/rk-ready}">预备项目</a></li>
                            <li><a href="javascript: void(0);" aria-expanded="false">项目库 <span class="menu-arrow"></span></a>
                                <ul class="nav-third-level nav" aria-expanded="false">
                                    <li><a href="rk-now.html" th:href="@{/fagai/rk-now}">当前年度</a></li>
                                    <li><a href="rk-history.html" th:href="@{/fagai/rk-history}">历史年度</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-bar-graph-2"></i><span> 项目调度 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a href="chart-flot.html" th:href="@{/fagai/dd-handle}">项目调度处理</a></li>
                            <li><a href="chart-flot.html" th:href="@{/fagai/dd-over}">项目调度结项</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-map"></i> <span> 前期工作事项 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a th:href="@{/fagai/qq-handle}">前期工作事项处理</a></li>
                            <li><a th:href="@{/fagai/alarm-handle}">前期工作事项预警</a></li>
                            <li><a th:href="@{/fagai/qq-over}">前期工作事项结项</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript: void(0);"><i class="fi-mail"></i><span> 问题督办 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a href="wtfg-over.html" th:href="@{/fagai/quesfg-list}">问题待处理</a></li>
                            <li><a href="wtfg-over.html" th:href="@{/fagai/quesfg-handle}">问题已处理</a></li>
                            <li><a href="quesfg-display.html" th:href="@{/fagai/quesfg-over}">问题结项</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-briefcase"></i> <span> 统计分析 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a th:href="@{/fgprojectview}">项目总体统计</a></li>
                            <li><a th:href="@{/fgproview}">前期工作统计</a></li>
                            <li><a th:href="@{/fgquesview}">问题督办统计</a></li>
                        </ul>
                    </li>

                </ul>

            </div>
            <!-- Sidebar -->
            <div class="clearfix"></div>

        </div>
        <!-- Sidebar -left -->

    </div>
    <!-- Left Sidebar End -->



    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="content-page">
        <!-- Start content -->
        <div class="content">
            <div class="container-fluid">

                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <h4 class="page-title float-left">前期工作处理</h4>

                            <ol class="breadcrumb float-right">
                                <li class="breadcrumb-item"><a href="#">重点项目库</a></li>
                                <li class="breadcrumb-item"><a href="#">前期工作管理</a></li>
                                <li class="breadcrumb-item active">前期工作处理</li>
                            </ol>

                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <!-- end row -->


                <div class="row">
                    <div class="col-lg-12">
                        <div class="card-box" style="margin-bottom: 0px;height: 444px;">
                            <div id="projectToolbar" class="toolbar" style="height: 60px; position: relative; background-color: white">

                                <!--<ul class="tools">
                                    <li>
                                        <span>项目名称</span>
                                        <input id="q_projectName" type="text">
                                    </li>
                                    <li>
                                        <span>前期事项名称</span>
                                        <input id="proName" type="text">
                                    </li>


                                </ul>-->
                                <ul class="tools" style="float:right">
                                    <li>
                                        <!--<span>查询条件</span>-->
                                        <input style="width: 280px;height:28px " id="projectName" placeholder="请输入查询条件，如：项目名称" name="projectName" type="text">
                                    </li>
                                    <li>
                                        <button id="queryProjectBtn" class="tool-button button-highlight">
                                            <i class="fa fa-search"></i> <span>查询</span>
                                        </button>

                                        <button id="yellowAlarm" class="tool-button button-highlight" onclick="yellow()" title="黄色预警">
                                            <i class="fa fa-upload"></i> <span>黄色预警</span>
                                        </button>
                                        <button id="redAlarm" class="tool-button button-highlight" onclick="red()" title="红色预警">
                                            <i class="fa fa-upload"></i> <span>红色预警</span>
                                        </button>
                                        <button id="over" class="tool-button button-highlight" onclick="over()" title="结项">
                                            <i class="fa fa-minus"></i> <span>结项</span>
                                        </button>

                                    </li>
                                    <li></li>

                                </ul>
                                <br style="clear:right;">

                            </div>
                            <div id="projectView" class="grid-view" style=" width: 100%;height:85%;">
                                <div class="grid-head" style="width: 100%;height:90%;overflow:auto;">
                                    <form method="get" th:action="@{/fagai/qq-handle}" th:object="${prostage}">
                                        <table class="table-head" cellspacing="0" cellpadding="0" style="display: block;">
                                            <colgroup>
                                                <col style="width: 40px;">
                                                <col style="width: 40px;">
                                                <col style="width: 180px;">
                                                <col style="width: 100px;">
                                                <col style="width: 100px;">
                                                <col style="width: 100px;">
                                                <col style="width: 100px;">
                                                <col style="width: 90px;">
                                                <col style="width: 100px;">
                                                <col style="width: 150px;">
                                                <col style="width: 100px;">
                                                <col style="width: 100px;">
                                                <col style="width: 70px;">
                                                <col><col style="width:0px">
                                            </colgroup>
                                            <tr>
                                                <th style="text-align: center;"><!--<input class="gridview-check-all" type="checkbox" name="PROJECT_ID_all">--></th>
                                                <!--<th>序号</th>-->
                                                <th>项目名称</th>
                                                <th>填报情况</th>
                                                <th>前期事项名称</th>
                                                <th>用地批复单位</th>
                                                <th>用地批复状态</th>
                                                <th>选址批复单位</th>
                                                <th>选址批复状态</th>
                                                <th>环评批复单位</th>
                                                <th>环评批复状态</th>
                                                <th>节能批复单位</th>
                                                <th>节能批复状态</th>
                                            </tr>

                                            <tr th:each="listo:${listo}">
                                                <th style="text-align: center;">
                                                    <input class="gridview-check-all" type="checkbox" name="select" th:attr="data-id=${listo.pid}">
                                                </th>
                                                <!--<th th:text="${listo.pid}"></th>-->
                                                <th style="text-align: left">
                                                    <a th:text="${listo.projectname}" th:href="@{/fagai/pinfofix-fg(pid=${listo.pid})}"></a>
                                                </th>
                                                <th th:text="${listo.prostatus}"></th>
                                                <th>
                                                    <a th:text="${listo.proname}" th:href="@{/fagai/qq-infofix(proid=${listo.proid})}"></a>
                                                </th>
                                                <th th:text="${listo.pioland}"></th>
                                                <th th:text="${listo.psland}"></th>
                                                <th th:text="${listo.pioaddress}"></th>
                                                <th th:text="${listo.psaddress}"></th>
                                                <th th:text="${listo.pioenv}"></th>
                                                <th th:text="${listo.psenv}"></th>
                                                <th th:text="${listo.piosave}"></th>
                                                <th th:text="${listo.pssave}"></th>

                                            </tr>
                                        </table>
                                    </form>
                                </div>
                                <div style="float: left;margin-top: 15px " class="dataTables_info" id="datatable_info" role="status" aria-live="polite" th:text="'当前第：'+ ${iPagew.getCurrent()}+' 页，总共：'+${iPagew.getPages()}+' 页，总共：'+${iPagew.getTotal()}+' 条记录'"></div>
                                <div style="float:right;margin-top: 6px" class="dataTables_paginate paging_simple_numbers" id="datatable_paginate">
                                    <ul class="pagination">
                                        <li class="paginate_button page-item previous" id="datatable_first">
                                            <a th:href="'/fagai/qq-handle?pageNum=1'" th:text="首页" aria-controls="datatable" data-dt-idx="1" tabindex="0" class="page-link"></a>
                                        </li>
                                        <li th:if="${iPagew.getCurrent()}" class="paginate_button page-item previous" id="datatable_previous">
                                            <a th:href="'/fagai/qq-handle?pageNum=' + ${iPagew.getCurrent()-1}" th:text="上一页" aria-controls="datatable" data-dt-idx="1" tabindex="0" class="page-link"></a>
                                        </li>
                                        <li th:each="pageNum:${#numbers.sequence(1, iPagew.getPages())}" class="paginate_button page-item active"  >
                                            <a th:href="'/fagai/qq-handle?pageNum=' + ${pageNum}" th:text="${pageNum}" aria-controls="datatable" data-dt-idx="1" tabindex="0" class="page-link"></a>
                                        </li>
                                        <li th:if="${iPagew.getCurrent()}" class="paginate_button page-item next" id="datatable_next">
                                            <a th:href="'/fagai/qq-handle?pageNum=' + ${iPagew.getCurrent()+1}" th:text="下一页" aria-controls="datatable" data-dt-idx="7" tabindex="0" class="page-link"></a>
                                        </li>

                                        <li  class="paginate_button page-item next" id="datatable_last">
                                            <a th:href="'/fagai/qq-handle?pageNum=' + ${iPagew.getPages()}" th:text="尾页" aria-controls="datatable" data-dt-idx="7" tabindex="0" class="page-link"></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div> <!-- end card-box -->
                    </div>
                    <!-- end col -->

                </div>
                <!-- end row -->


            </div> <!-- container -->

        </div> <!-- content -->

        <footer class="footer text-right">
            2019 - 2020 © 重点项目库. - Important.com
        </footer>

    </div>


    <!-- ============================================================== -->
    <!-- End Right content here -->
    <!-- ============================================================== -->


</div>
<!-- END wrapper -->
<script>
    function yellow() {
        var checkbox_list = document.querySelectorAll('[name="select"]');
        var id_list = [];
        for(var i = 0;i < checkbox_list.length;i++){
            if(checkbox_list[i].checked){
                // 取符合条件的checkbox的data-id属性,并存到id_list里
                id_list.push(checkbox_list[i].getAttribute("data-id"))
            }
        }
        console.log("勾选项id:", id_list)
        var xhr = new XMLHttpRequest();
        xhr.open("post","/fagai/alarm-yellow",true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.send(JSON.stringify(id_list));
        window.location.href="/fagai/qq-handle"
    }
    function red() {
        var checkbox_list = document.querySelectorAll('[name="select"]');
        var id_list = [];
        for(var i = 0;i < checkbox_list.length;i++){
            if(checkbox_list[i].checked){
                // 取符合条件的checkbox的data-id属性,并存到id_list里
                id_list.push(checkbox_list[i].getAttribute("data-id"))
            }
        }
        console.log("勾选项id:", id_list)
        var xhr = new XMLHttpRequest();
        xhr.open("post","/fagai/alarm-red",true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.send(JSON.stringify(id_list));
        window.location.href="/fagai/qq-handle"
    }
    function over() {
        var checkbox_list = document.querySelectorAll('[name="select"]');
        var id_list = [];
        for(var i = 0;i < checkbox_list.length;i++){
            if(checkbox_list[i].checked){
                // 取符合条件的checkbox的data-id属性,并存到id_list里
                id_list.push(checkbox_list[i].getAttribute("data-id"))
            }
        }
        console.log("勾选项id:", id_list)
        var xhr = new XMLHttpRequest();
        xhr.open("post","/fagai/qq-handle",true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.send(JSON.stringify(id_list));
        window.location.href="/fagai/qq-over"
    }
</script>


<!-- jQuery  -->
<script src="../../assets/js/jquery.min.js" th:href="@{../assets/js/jquery.min.js}"></script>
<script src="../../assets/js/popper.min.js" th:href="@{../assets/js/popper.min.js}"></script>
<script src="../../assets/js/bootstrap.min.js" th:href="@{../assets/js/bootstrap.min.js}"></script>
<script src="../../assets/js/metisMenu.min.js" th:href="@{../assets/js/metisMenu.min.js}"></script>
<script src="../../assets/js/waves.js" th:href="@{../assets/js/waves.js}"></script>
<script src="../../assets/js/jquery.slimscroll.js" th:href="@{../assets/js/jquery.slimscroll.js}"></script>

<!-- Sweet Alert Js  -->
<script src="../plugins/sweet-alert/sweetalert2.min.js" th:href="@{plugins/sweet-alert/sweetalert2.min.js}"></script>
<script src="../../assets/pages/jquery.sweet-alert.init.js" th:href="@{../assets/pages/jquery.sweet-alert.init.js}"></script>

<!-- App js -->
<script src="../../assets/js/jquery.core.js" th:href="@{../assets/js/jquery.core.js}"></script>
<script src="../../assets/js/jquery.app.js" th:href="@{../assets/js/jquery.app.js}"></script>

</body>
</html>