
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>重点项目库</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="../assets/images/favicon.ico" th:href="@{assets/images/favicon.ico}">
    <script src="js/echarts.min.js" th:src="@{assets/js/echarts.js}"></script>
    <script src="js/echarts.min.js" th:src="@{assets/js/china.js}"></script>

    <!-- App css -->
    <link href="../assets/css/bootstrap.min.css" th:href="@{assets/css/bootstrap.min.css}" rel="stylesheet" type="text/css" />
    <link href="../assets/css/icons.css" th:href="@{assets/css/icons.css}" rel="stylesheet" type="text/css" />
    <link href="../assets/css/metismenu.min.css" th:href="@{assets/css/metismenu.min.css}" rel="stylesheet" type="text/css" />
    <link href="../assets/css/style.css" th:href="@{assets/css/style.css}" rel="stylesheet" type="text/css" />

    <script src="../assets/js/modernizr.min.js" th:href="@{assets/js/modernizr.min.js}"></script>

</head>


<body>

<!-- Begin page -->
<div id="wrapper">

    <!-- Top Bar Start -->
    <div class="topbar" style="background: linear-gradient(to top, rgb(87, 194, 1),rgb(87, 194, 1));">

        <!-- LOGO -->
        <div class="topbar-left" style="background: linear-gradient(to top, rgb(87, 194, 1),rgb(87, 194, 1));">
            <a href="index-fg.html" class="logo">
                        <span>
                            <!--<img src="../assets/images/logo.png" th:href="@{assets/css/metismenu.min.css}" alt="" height="16">-->
                        </span>
                <i>
                    <img src="../assets/images/logo_sm.png" th:href="@{assets/css/metismenu.min.css}" alt="" height="28">
                </i>
            </a>
        </div>

        <nav class="navbar-custom" style="background: linear-gradient(to top, rgb(87, 194, 1),rgb(87, 194, 1));">

            <ul class="list-unstyled topbar-right-menu float-right mb-0">


                <li class="dropdown notification-list">
                    <a class="nav-link dropdown-toggle waves-effect waves-light nav-user" data-toggle="dropdown" href="#" role="button"
                       aria-haspopup="false" aria-expanded="false">
                        <img src="../assets/images/users/avatar-1.jpg" th:href="@{assets/images/users/avatar-1.jpg}" alt="user" class="rounded-circle">
                        <span class="ml-1" th:text="${session.loginuser.username}"> <i class="mdi mdi-chevron-down"></i> </span>欢迎您!

                    </a>
                    <div class="dropdown-menu dropdown-menu-right profile-dropdown ">
                        <!-- item-->
                        <div class="dropdown-item noti-title">
                            <h6 class="text-overflow m-0">欢迎 !</h6>
                        </div>

                        <!-- item-->
                        <!--<a href="javascript:void(0);" class="dropdown-item notify-item">-->
                        <!--<i class="fi-head"></i> <span>个人信息</span>-->
                        <!--</a>-->


                        <!-- item-->
                        <a href="javascript:void(0);" th:href="@{/exit}" class="dropdown-item notify-item">
                            <i class="fi-power"></i> <span>注销</span>
                        </a>

                    </div>
                </li>

            </ul>

            <ul class="list-inline menu-left mb-0">
                <li class="float-left">
                    <button class="button-menu-mobile open-left waves-light waves-effect">
                        <i class="dripicons-menu"></i>
                    </button>
                </li>

            </ul>

        </nav>

    </div>
    <!-- Top Bar End -->


    <!-- ========== Left Sidebar Start ========== -->
    <div class="left side-menu">
        <div class="slimscroll-menu" id="remove-scroll">

            <!--- Sidemenu -->
            <div id="sidebar-menu">
                <!-- Left Menu Start -->
                <ul class="metismenu" id="side-menu">
                    <li class="menu-title">Important</li>
                    <li>
                        <a href="index-fg.html" th:href="@{/fagai/index-fg}">
                            <i class="fi-air-play"></i>
                            <!--<span class="badge badge-danger badge-pill pull-right">3</span>-->
                            <span> 首页 </span>
                        </a>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-briefcase"></i> <span> 项目审核 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a href="sh-none.html" th:href="@{/fagai/sh-none}">未审核项目</a></li>
                            <li><a href="sh-over.html" th:href="@{/fagai/sh-over}">已审核项目</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-box"></i> <span> 项目入库 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level nav" aria-expanded="false">
                            <li><a href="rk-ready.html" th:href="@{/fagai/rk-ready}">预备项目</a></li>
                            <li><a href="javascript: void(0);" aria-expanded="false">项目库 <span class="menu-arrow"></span></a>
                                <ul class="nav-third-level nav" aria-expanded="false">
                                    <li><a href="rk-now.html" th:href="@{/fagai/rk-now}">当前年度</a></li>
                                    <li><a href="rk-history.html" th:href="@{/fagai/rk-history}">历史年度</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-bar-graph-2"></i><span> 项目调度 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a href="chart-flot.html" th:href="@{/fagai/dd-handle}">项目调度处理</a></li>
                            <li><a href="chart-flot.html" th:href="@{/fagai/dd-over}">项目调度结项</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-map"></i> <span> 前期工作事项 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a th:href="@{/fagai/qq-handle}">前期工作事项处理</a></li>
                            <li><a th:href="@{/fagai/alarm-handle}">前期工作事项预警</a></li>
                            <li><a th:href="@{/fagai/qq-over}">前期工作事项结项</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="javascript: void(0);"><i class="fi-mail"></i><span> 问题督办 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a href="wtfg-over.html" th:href="@{/fagai/quesfg-list}">问题待处理</a></li>
                            <li><a href="wtfg-over.html" th:href="@{/fagai/quesfg-handle}">问题已处理</a></li>
                            <li><a href="quesfg-display.html" th:href="@{/fagai/quesfg-over}">问题结项</a></li>
                        </ul>
                    </li>

                    <li>
                        <a href="javascript: void(0);"><i class="fi-briefcase"></i> <span> 统计分析 </span> <span class="menu-arrow"></span></a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li><a th:href="@{/fgprojectview}">项目总体统计</a></li>
                            <li><a th:href="@{/fgproview}">前期工作统计</a></li>
                            <li><a th:href="@{/fgquesview}">问题督办统计</a></li>
                        </ul>
                    </li>

                </ul>

            </div>
            <!-- Sidebar -->
            <div class="clearfix"></div>

        </div>
        <!-- Sidebar -left -->

    </div>
    <!-- Left Sidebar End -->



    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="content-page">
        <!-- Start content -->
        <div class="content">
            <div class="container-fluid">

                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <h4 class="page-title float-left">前期工作统计</h4>

                            <ol class="breadcrumb float-right">
                                <li class="breadcrumb-item"><a href="#">重点项目库</a></li>
                                <li class="breadcrumb-item active">统计分析</li>
                                <li class="breadcrumb-item active">前期工作统计</li>
                            </ol>

                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
                <!-- end row -->

                <!--<div class="row">-->
                    <!--<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">-->
                        <!--<div class="card-box tilebox-one">-->
                            <!--<i class="fi-box float-right"></i>-->
                            <!--<h6 class="text-muted text-uppercase mb-3">前期工作事项总数</h6>-->
                            <!--<h4 class="mb-3" data-plugin="counterup" >-->
                                <!--<p th:text="${countsum}"></p>-->
                            <!--</h4>-->
                            <!--<span class="text-muted ml-2 vertical-middle">个</span>-->
                        <!--</div>-->
                    <!--</div>-->

                    <!--<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">-->
                        <!--<div class="card-box tilebox-one">-->
                            <!--<i class="fi-layers float-right"></i>-->
                            <!--<h6 class="text-muted text-uppercase mb-3">前期工作事项未填数</h6>-->
                            <!--<h4 class="mb-3"><span data-plugin="counterup">-->
                                            <!--<p th:text="${countweitian}"></p>-->
                                        <!--</span></h4>-->
                            <!--<span class="text-muted ml-2 vertical-middle">个</span>-->
                        <!--</div>-->
                    <!--</div>-->

                    <!--<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">-->
                        <!--<div class="card-box tilebox-one">-->
                            <!--<i class="fi-tag float-right"></i>-->
                            <!--<h6 class="text-muted text-uppercase mb-3">前期工作事项已填数</h6>-->
                            <!--<h4 class="mb-3"><span data-plugin="counterup">-->
                                            <!--<p th:text="${countyitian}"></p>-->
                                        <!--</span></h4>-->
                            <!--<span class="text-muted ml-2 vertical-middle">个</span>-->
                        <!--</div>-->
                    <!--</div>-->

                    <!--<div class="col-xs-12 col-md-6 col-lg-6 col-xl-3">-->
                        <!--<div class="card-box tilebox-one">-->
                            <!--<i class="fi-briefcase float-right"></i>-->
                            <!--<h6 class="text-muted text-uppercase mb-3">前期工作事项结项数</h6>-->
                            <!--<h4 class="mb-3" data-plugin="counterup">-->
                                <!--<p th:text="${countjiexiang}"></p>-->
                            <!--</h4>-->
                            <!--<span class="text-muted ml-2 vertical-middle">个</span>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->


                <!--start new row-->
                <div class="row">

                    <div class="col-lg-6">
                        <div class="card-box">
                            <h4 class="header-title">前期工作事项的填报状态统计</h4>

                            <div id="echarts_1" style="height: 450px;padding: 0px;position: relative"></div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="card-box">
                            <h4 class="header-title">前期工作事项问题的状态统计</h4>

                            <div id="echarts_2" style="height: 450px;padding: 0px;position: relative"></div>

                        </div>
                    </div>

                </div>
                <!-- end row -->

            </div> <!-- container -->

        </div> <!-- content -->

        <footer class="footer text-right">
            2019 - 2020 © 重点项目库. - Important.com
        </footer>

    </div>
    <!-- ============================================================== -->
    <!-- End Right content here -->
    <!-- ============================================================== -->
</div>
<!-- END wrapper -->


<!-- jQuery  -->
<script src="../assets/js/jquery.min.js" th:href="@{assets/js/jquery.min.js}"></script>
<script src="../assets/js/popper.min.js" th:href="@{assets/js/popper.min.js}"></script>
<script src="../assets/js/bootstrap.min.js" th:href="@{assets/js/bootstrap.min.js}"></script>
<script src="../assets/js/metisMenu.min.js" th:href="@{assets/js/metisMenu.min.js}"></script>
<script src="../assets/js/waves.js" th:href="@{assets/js/waves.js}"></script>
<script src="../assets/js/jquery.slimscroll.js" th:href="@{assets/js/jquery.slimscroll.js}"></script>
<script src="plugins/waypoints/lib/jquery.waypoints.min.js" th:href="@{plugins/waypoints/lib/jquery.waypoints.min.js}"></script>
<script src="plugins/counterup/jquery.counterup.min.js" th:href="@{plugins/counterup/jquery.counterup.min.js}"></script>

<!-- Chart JS -->
<script src="plugins/chart.js/chart.bundle.js" th:href="@{plugins/chart.js/chart.bundle.js}"></script>

<!--&lt;!&ndash; init dashboard &ndash;&gt;-->
<!--<script src="../assets/pages/jquery.dashboard.init.js" th:href="@{assets/pages/jquery.dashboard.init.js}"></script>-->

<!-- App js -->
<script src="../assets/js/jquery.core.js" th:href="@{assets/js/jquery.core.js}"></script>
<script src="../assets/js/jquery.app.js" th:href="@{assets/js/jquery.app.js}"></script>
<script>
    window.onload=function(){
        function getbar() {
            $.ajax({
                method: 'post',
                data: {},
                url: 'http://localhost:8080/hyproreport',
                dataType: 'json',
                success: function (result) {
                    // var pieData = eval("("+result+")");
                    console.log(result);
                    myChart1.setOption(
                        option = {
                            legend: {//图例
                                data: ['未填','已填','结项'],//与series的name对应
                                left: 'center',//图例的位置，可以用像素，可以用百分比，也可以用center，right等
                                botton: 12.5,//图例的位置
                                itemWidth: 50,//图例图标的宽
                                itemHeight: 20,//图例图标的高
                                textStyle: {
                                    color: '#878787',//值的具体的颜色
                                }
                            },
                            grid: {
                                left: '15%',
                                right: '15%',
                                bottom: '10%',
                                containLabel: true
                            },
                            legend: {
                                left: 'center',
                                top: 'bottom',
                                data: [result[0].name,result[1].name,result[2].name]
                            },
                            toolbox: {
                                show: true,
                                feature: {
                                    mark: {show: true},
                                    dataView: {show: true, readOnly: false},
                                    magicType: {
                                        show: true,
                                        type: ['pie', 'funnel']
                                    },
                                    // restore: {show: true},
                                    saveAsImage: {show: true}
                                }
                            },
                            xAxis: {//x轴
                                type: 'category',
                                data: [result[0].name,result[1].name,result[2].name],//x轴的数据
                                splitLine: {show: false},//去除网格分割线
                                // splitArea: {show: true},//保留网格区域
                                axisLine: {//坐标线
                                    lineStyle: {
                                        type: 'solid',
                                        color: '#d8d8d8',//轴线的颜色
                                        width:'1'//坐标线的宽度
                                    }
                                },
                                axisTick: {//刻度
                                    show: false//不显示刻度线
                                },
                                axisLabel: {
                                    textStyle: {
                                        color: '#878787',//坐标值的具体的颜色
                                    }
                                },
                                splitLine: {
                                    show: false//去掉分割线
                                },
                            },
                            backgroundColor: '#fff',//图得背景色
                            yAxis: {
                                name: '前期工作数（个）',//轴的名字，默认位置在y轴上方显示
                                // max:6,//最大刻度如何修改为max？？？？原来注释到这两行就可以自动确定最大值
                                type: 'value',
                                axisLine: {//线
                                    show: false
                                },
                                axisTick: {//刻度
                                    show: false
                                },
                                axisLabel: {
                                    textStyle: {
                                        color: '#878787',//坐标值得具体的颜色
                                    }
                                },
                                minInterval: 1,//标值的最小间隔
                                splitLine: {
                                    lineStyle: {
                                        color: ['#f6f6f6'],//分割线的颜色
                                    }
                                }
                            },
                            series: [{
                                name: '前期工作事项填报状态',//每组数据的名字，与图例对应
                                data: result,//数据
                                type: 'bar',//柱状图
                                itemStyle: {
                                    normal: {

                                        color: function (params) {
                                            var colorList = ['#FD6B71', '#E4EB9B', '#72ADFF', '#c8ba23'];
                                            return colorList[params.dataIndex]
                                        },
                                        label: {
                                            show: true,//柱子上显示值
                                            position: 'top',//值在柱子上方显示
                                            textStyle: {
                                                color: '#000000'//值得颜色
                                            }
                                        }
                                    }
                                },
                                barWidth:35//设置柱子宽度，单位为px
                            }],
                        }



                    );

                }

            })
        }
        // 基于准备好的dom，初始化echarts实例
        var myChart1 = echarts.init(document.getElementById('echarts_1'));
        getbar();



        // 使用刚指定的配置项和数据显示图表。
        // myChart1.setOption(option);



        function getpie() {
            $.ajax({
                method: 'post',
                data: {},
                url: 'http://localhost:8080/fgproquesstaus',
                dataType: 'json',
                success: function (result) {
                    // var pieData = eval("("+result+")");
                    console.log(result);
                    myChart2.setOption(
                        option = {
                            // legend: {//图例
                            //     data: ['前期工作事项'],//与series的name对应
                            //     left: 'center',//图例的位置，可以用像素，可以用百分比，也可以用center，right等
                            //     top: 12.5,//图例的位置
                            //     itemWidth: 50,//图例图标的宽
                            //     itemHeight: 20,//图例图标的高
                            //     textStyle: {
                            //         color: '#878787',//值的具体的颜色
                            //     }
                            // },
                            legend: {
                                left: 'center',
                                top: 'bottom',
                                data: [result[0].name,result[1].name,result[2].name,result[3].name]
                            },
                            toolbox: {
                                show: true,
                                feature: {
                                    mark: {show: true},
                                    dataView: {show: true, readOnly: false},
                                    magicType: {
                                        show: true,
                                        type: ['pie', 'funnel']
                                    },
                                    // restore: {show: true},
                                    saveAsImage: {show: true}
                                }
                            },
                            xAxis: {//x轴
                                type: 'category',
                                data: ["已申请","未处理","已处理","结项"],//x轴的数据
                                splitLine: {show: false},//去除网格分割线
                                // splitArea: {show: true},//保留网格区域
                                axisLine: {//坐标线
                                    lineStyle: {
                                        type: 'solid',
                                        color: '#d8d8d8',//轴线的颜色
                                        width:'1'//坐标线的宽度
                                    }
                                },
                                axisTick: {//刻度
                                    show: false//不显示刻度线
                                },
                                axisLabel: {
                                    textStyle: {
                                        color: '#878787',//坐标值的具体的颜色
                                    }
                                },
                                splitLine: {
                                    show: false//去掉分割线
                                },
                            },
                            backgroundColor: '#fff',//图得背景色
                            yAxis: {
                                name: '问题数（个）',//轴的名字，默认位置在y轴上方显示
                                // max:6,//最大刻度如何修改为max？？？？原来注释到这两行就可以自动确定最大值
                                type: 'value',
                                axisLine: {//线
                                    show: false
                                },
                                axisTick: {//刻度
                                    show: false
                                },
                                axisLabel: {
                                    textStyle: {
                                        color: '#878787',//坐标值得具体的颜色
                                    }
                                },
                                minInterval: 1,//标值的最小间隔
                                splitLine: {
                                    lineStyle: {
                                        color: ['#f6f6f6'],//分割线的颜色
                                    }
                                }
                            },
                            series: [{
                                name: '前期工作事项填报状态',//每组数据的名字，与图例对应
                                data: result,//数据
                                type: 'bar',//柱状图
                                itemStyle: {
                                    normal: {

                                        color: function (params) {
                                            var colorList = ['#FD6B71', '#E4EB9B', '#72ADFF', '#c8ba23'];
                                            return colorList[params.dataIndex]
                                        },
                                        label: {
                                            show: true,//柱子上显示值
                                            position: 'top',//值在柱子上方显示
                                            textStyle: {
                                                color: '#000000'//值得颜色
                                            }
                                        }
                                    }
                                },
                                barWidth:35//设置柱子宽度，单位为px
                            }],
                        }




                    );

                }

            })
        }
        // 基于准备好的dom，初始化echarts实例
        var myChart2 = echarts.init(document.getElementById('echarts_2'),'macarons');
        getpie();

    }






</script>
</body>
</html>



