(function(){var t=ui.theme.highlight.border,i=ui.theme.highlight.font;var e="tab-button-selection";var n="changing",s="changed";var o=ui.define("ctrls.TabPanel",{_getOption:function(){return{tabPanelId:"",bodyPanelId:"",direction:"horizontal",duration:800}},_getEvents:function(){return[n,s]},_create:function(){this.tabPanel=ui.getJQueryElement(this.option.tabPanelId);this.bodyPanel=ui.getJQueryElement(this.option.bodyPanelId);this.animator=ui.animator(this.bodyPanel,{ease:ui.AnimationStyle.easeFromTo});if(ui.core.type(this.option.duration)==="number"){this.animator.duration=this.option.duration}else{this.animator.duration=800}this.bodies=this.option.tabBodies;this.direction=this.option.direction||"horizontal";this.width},_init:function(){this.currentTab=null;if(this.direction==="horizontal"){this.animator[0].onChange=$.proxy(this.horizontalScroll,this);this.bodyShow=this.horizontalShow}else{this.animator[0].onChange=$.proxy(this.verticalScroll,this);this.bodyShow=this.verticalShow}if(!this.bodies){this.bodies=this.bodyPanel.children(".tab-body")}else{if(!this.bodyPanel){this.bodyPanel=this.bodies.parent()}}if(this.tabPanel){this._initTabs()}this._initBodies()},_initTabs:function(){this.tabs=this.tabPanel.find(".tab-button");this.tabs.addClass("font-highlight-hover");var t=this.tabs.nodeName();this.tabPanel.click($.proxy(function(i){var e=$(i.target),n;while((n=e.nodeName())!==t){if(e[0]===this.tabPanel[0]){return}e=e.parent()}this._setCurrent(e)},this))},_initBodies:function(){this.setBodiesLocation()},setBodiesLocation:function(t,i){if(!$.isNumeric(t)){t=this.bodyPanel.width()}if(!$.isNumeric(i)){i=this.bodyPanel.height()}this.bodyWidth=t;this.bodyHeight=i;var e=0,n,s;if(this.direction==="horizontal"){for(n=0;n<this.bodies.length;n++){s=$(this.bodies[n]);s.css("left",e+"px");t=parseInt(s.css("width"),10)||null;if($.isNumeric(t)){e+=t}else{e+=this.bodyWidth}}}else{for(n=0;n<this.bodies.length;n++){s=$(this.bodies[n]);s.css("top",e+"px");i=parseInt(s.css("height"),10)||null;if($.isNumeric(t)){e+=t}else{e+=this.bodyHeight}}}},restore:function(t){var i;if(this.currentTab){i=this.getSelectedIndex(this.currentTab);if(t===false){this.bodySet(i)}else{this.bodyShow(i)}}},_setCurrent:function(n,o,a){if(this.currentTab){if(this.currentTab[0]===n[0]){return}this.currentTab.removeClass(e);if(this.tabs){this.currentTab.removeClass(t).removeClass(i)}this.currentTab=null}if(ui.core.isJQueryObject(n)){n.addClass(e);if(this.tabs){n.addClass(t).addClass(i)}}this.currentTab=n;if(ui.core.type(o)!=="number"){o=this.getSelectedIndex(n)}this.onChanging(o);if(a===false){this.bodySet(o);this.fire(s,o)}else{this.animator.onEnd=this.onChanged(o);this.bodyShow(o)}},setIndex:function(t,i){var e=this.tabs||this.bodies;if(t>=0&&t<e.length){this._setCurrent($(e[t]),t,i)}return this},getSelectedIndex:function(t){var i=this.tabs||this.bodies;t=t||this.currentTab;if(i&&t){for(var e=0;e<i.length;e++){if(i[e]===t[0])return e}}return 0},horizontalScroll:function(t){this.bodyPanel.scrollLeft(t)},horizontalShow:function(t){this.animator.stop();var i=this.animator[0];i.begin=this.bodyPanel.scrollLeft();i.end=t*this.bodyWidth;return this.animator.start()},verticalScroll:function(t){this.bodyPanel.scrollTop(t)},verticalShow:function(t){this.animator.stop();var i=this.animator[0];i.begin=this.bodyPanel.scrollTop();i.end=t*this.bodyHeight;return this.animator.start()},bodyShow:function(){},bodySet:function(t){if(this.direction==="horizontal"){this.bodyPanel.scrollLeft(this.bodyWidth*t)}else{this.bodyPanel.scrollTop(this.bodyHeight*t)}},setBodyHeight:function(t){if($.isNumeric(t)){var i=t+"px";this.bodyPanel.css("height",i);this.bodies.css("height",i)}},onChanging:function(t){this.fire(n,t)},onChanged:function(t){var i=this,e;if(this.eventTarget.hasEvent(s)){e=function(){i.fire(s,t)}}else{e=false}return e}});var a=function(){this.tabTools=[];this.tabLoadStates=[];this.tabChanging=function(t,i){this.showTools(i)};this.tabChanged=ui.core.noop};a.prototype={addTools:function(){var t,i;var e,n,s;for(t=0,i=arguments.length;t<i;t++){n=arguments[t];if(ui.core.type(n)==="string"){e=$("#"+arguments[t]);if(e.length==0){e=undefined}}else if($.isArray(n)){e=[];for(s=0;s<n.length;s++){e.push($("#"+n[s]));if(e[e.length-1].length==0){e.pop()}}if(e.length==1){e=e[0]}}this.tabTools.push(e)}},showTools:function(t){var i,e,n;var s;for(i=0,e=this.tabTools.length;i<e;i++){s=this.tabTools[i];if(!s){continue}if(i===t){if($.isArray(s)){for(n=0;n<s.length;n++){s[n].css("display","block")}}else{s.css("display","block")}}else{if($.isArray(s)){for(n=0;n<s.length;n++){s[n].css("display","none")}}else{s.css("display","none")}}}},tryCallLoadFunc:function(t,i,e){if(!$.isFunction(i)){return}var n=[];var s=3,o=arguments.length;for(;s<o;s++){n.push(arguments[s])}if(!this.tabLoadStates[t]){i.apply(e,n);this.tabLoadStates[t]=true}},resetAt:function(t){if(t<0||t>=this.tabLoadStates.length){return}this.tabLoadStates[t]=false},reset:function(){var t,i;for(t=0,i=this.tabLoadStates.length;t<i;t++){this.tabLoadStates[t]=false}}};ui.tab={createTabManager:function(t,i){if(!i){i=t;t=null}if(!$.isFunction(i)){ui.error("loadDataFunc方法必须实现！")}var e=new a;if($.isFunction(t)){e.tabChanging=t}e.tabChanged=i;return e},createTabs:function(t){return o(t)},createViews:function(t){if(!t){t={}}if(ui.core.type(t.duration)!=="number"){t.duration=500}var i=o(t);return i}}})();