(function(){var t=640,i=480;var n="opening",e="opened",s="closing",o="closed",h="resize";var a={up:function(){var t=ui.core.root.clientHeight,i=ui.core.root.clientWidth;var n=this.animator[0];n.begin=t;n.end=(t-this.offsetHeight)/2;var e=this;n.onChange=function(t){e.cwindow.css("top",t+"px")};this.openMask();this.animator.onEnd=function(){e.onOpened()};this.cwindow.css({top:n.begin+"px",left:(i-this.offsetWidth)/2+"px",display:"block"})},down:function(){var t=ui.core.root.clientHeight,i=ui.core.root.clientWidth;var n=this.animator[0];n.begin=-this.offsetHeight;n.end=(t-this.offsetHeight)/2;var e=this;n.onChange=function(t){e.cwindow.css("top",t+"px")};this.openMask();this.animator.onEnd=function(){e.onOpened()};this.cwindow.css({top:n.begin+"px",left:(i-this.offsetWidth)/2+"px",display:"block"})},left:function(){var t=ui.core.root.clientHeight,i=ui.core.root.clientWidth;var n=this.animator[0];n.begin=-this.offsetWidth;n.end=(i-this.offsetWidth)/2;var e=this;n.onChange=function(t){e.cwindow.css("left",t+"px")};this.openMask();this.animator.onEnd=function(){e.onOpened()};this.cwindow.css({top:(t-this.offsetHeight)/2+"px",left:n.begin+"px",display:"block"})},right:function(){var t=ui.core.root.clientHeight,i=ui.core.root.clientWidth;var n=this.animator[0];n.begin=i;n.end=(i-this.offsetWidth)/2;var e=this;n.onChange=function(t){e.cwindow.css("left",t+"px")};this.openMask();this.animator.onEnd=function(){e.onOpened()};this.cwindow.css({top:(t-this.offsetHeight)/2+"px",left:n.begin+"px",display:"block"})},fadein:function(){var t=ui.core.root.clientHeight,i=ui.core.root.clientWidth;var n=this.animator[0];n.begin=0;n.end=100;var e=this;n.onChange=function(t){e.cwindow.css({filter:"Alpha(opacity="+t+")",opacity:t/100})};this.openMask();this.animator.onEnd=function(){e.onOpened()};this.cwindow.css({top:(t-this.offsetHeight)/2+"px",left:(i-this.offsetWidth)/2+"px",opacity:0,filter:"Alpha(opacity=0)",display:"block"})}};var c={up:function(){var t=this.animator[0];t.begin=parseFloat(this.cwindow.css("top"),10);t.end=-this.offsetHeight;var i=this;t.onChange=function(t){i.cwindow.css("top",t+"px")};this.closeMask();this.animator.onEnd=function(){i.onClosed()}},down:function(){var t=this.animator[0];t.begin=parseFloat(this.cwindow.css("top"),10);t.end=ui.core.root.clientHeight;var i=this;t.onChange=function(t){i.cwindow.css("top",t+"px")};this.closeMask();this.animator.onEnd=function(){i.onClosed()}},left:function(){var t=this.animator[0];t.begin=parseFloat(this.cwindow.css("left"),10);t.end=-this.offsetWidth;var i=this;t.onChange=function(t){i.cwindow.css("left",t+"px")};this.closeMask();this.animator.onEnd=function(){i.onClosed()}},right:function(){var t=this.animator[0];t.begin=parseFloat(this.cwindow.css("left"),10);t.end=ui.core.root.clientWidth;var i=this;t.onChange=function(t){i.cwindow.css("left",t+"px")};this.closeMask();this.animator.onEnd=function(){i.onClosed()}},fadeout:function(){var t=this.animator[0];t.begin=100;t.end=0;var i=this;t.onChange=function(t){i.cwindow.css({filter:"Alpha(opacity="+t+")",opacity:t/100})};this.closeMask();this.animator.onEnd=function(){i.onClosed()};this.cwindow.css({filter:"Alpha(opacity=100)",opacity:1,display:"block"})}};var r=ui.define("ctrls.ContentWindow",{_getOption:function(){return{title:"",show:"up",hide:"down",done:"up",src:null,width:t,height:i,hasMask:true,windowStyle:null,titleHeight:48,ctrlHeight:48,isRespond:true,resizeable:false,draggable:false,closeButtonStyle:"close-button font-highlight-hover"}},_getEvents:function(){return[n,e,s,o,h]},_create:function(){this.cwindow=null;this.mask=null;this.hasMask=!!this.option.hasMask;this.isOpened=false;this.animator=ui.animator();this.animator.duration=500;this.animating=false;this.offsetWidth=this.width=this.option.width;this.offsetHeight=this.height=this.option.height;this.contentWidth=this.width;this.contentHeight=0;if(!$.isNumeric(this.width)||this.width<0){this.width=t}if(!$.isNumeric(this.height)||this.height<0){this.height=i}this.option.isRespond=!!this.option.isRespond;this.option.resizeable=!!this.option.resizeable;this.option.draggable=!!this.option.draggable;var n=this;"show hide done".replace(/[^, ]+/g,function(t){n[t+"Async"]=function(i){this._asyncCall(t,i)}})},_init:function(){this.cwindow=$("<div class='content-window border-highlight' />");this.titlePanel=$("<div class='cw-title-panel' />");this.contentPanel=$("<div class='cw-content-panel' />");this.ctrlPanel=null;this.contentPanel.append(this.element);var t=this.option.title;if(ui.core.isPlainObject(t)){this.setTitle(t.text,t.hasHr,t.style)}else if(t){this.setTitle(t)}if(this.option.draggable){this._initDraggable()}this.option.closeButtonStyle=this.option.closeButtonStyle||"close-button";var i=$("<a href='javascript:void(0)'>Ã—</a>").attr("class",this.option.closeButtonStyle);var n=this;i.click(function(t){n.hide()});this.cwindow.append(this.titlePanel);this.cwindow.append(this.contentPanel);this.cwindow.append(i);if(this.option.resizeable){this._initResizeable()}this.animator.addTarget(this.cwindow,{ease:ui.AnimationStyle.easeFromTo});var e=$(document.body);if(this.hasMask){this.mask=$("<div class='cw-mask-panel' />");e.append(this.mask);this.animator.addTarget(this.mask,{ease:ui.AnimationStyle.easeFrom})}e.append(this.cwindow);var s;if(this.option.isRespond){s=function(t,i,e){n._calculateSize(i,e)};s();ui.resize(s,ui.eventPriority.ctrlResize)}else{this._setSize(this.width,this.height,false)}if(ui.core.isPlainObject(this.option.windowStyle)){this.cwindow.css(this.option.windowStyle)}this.contentPanel.css({height:this.contentHeight+"px",top:this.option.titleHeight+"px"})},_initDraggable:function(){var t={target:this.cwindow,parent:$(document.body)};var i=this;if(this.element.nodeName()==="IFRAME"){t.onBegin=function(){i.element.hide()};t.onEnd=function(){i.element.show()}}this.titlePanel.addClass("dragable-title");this.titlePanel.draggable(t)},_initResizeable:function(){this.resizeHandle=$("<u class='resize-handle' />");this.cwindow.append(this.resizeHandle);var t={target:this,parent:$(document.body),minWidth:320,minHeight:240,doc:$(document),onBeginDrag:function(t){if(t.which!==1)return;var i=t.data;i.currentX=t.pageX;i.currentY=t.pageY;i.doc.on("mousemove",i,i.onMoving).on("mouseup",i,i.onEndDrag);document.onselectstart=function(){return false};i.isStarted=true;if($.isFunction(i.onBegin)){i.onBegin()}},onMoving:function(t){var i=t.data;if(!i.isStarted)return;var n=t.pageX-i.currentX,e=t.pageY-i.currentY;i.currentX=t.pageX;i.currentY=t.pageY;var s=i.target.offsetWidth+n;var o=i.target.offsetHeight+e;if(s<i.minWidth){s=i.minWidth}if(o<i.minHeight){o=i.minHeight}i.target._setSize(s,o)},onEndDrag:function(t){if(t.which!==1)return;var i=t.data;if(!i.isStarted)return;i.currentX=i.currentY=0;i.isStarted=false;i.doc.off("mousemove",i.onMoving).off("mouseup",i.onEndDrag);document.onselectstart=null;if($.isFunction(i.onEnd)){i.onEnd()}}};var i=this;if(this.element.nodeName()==="IFRAME"){t.onBegin=function(){i.element.hide()};t.onEnd=function(){i.element.show()}}this.resizeHandle.on("mousedown",t,t.onBeginDrag)},_contentAppend:function(t){if(ui.core.isDomObject(t)){t=$(t)}else if(!ui.core.isJQueryObject(t)){return}this.contentPanel.append(t)},buttonAppend:function(t){if(ui.core.type(t)==="string"){t=$("#"+t)}else if(ui.core.isDomObject(t)){t=$(t)}else if(!ui.core.isJQueryObject(t)){return}if(!this.ctrlPanel){this.ctrlPanel=$("<div class='cw-ctrl-panel' />");this._updateContentPanelHeight();this.cwindow.append(this.ctrlPanel);this.fire(h)}this.ctrlPanel.append(t);return this},_updateContentPanelHeight:function(){this.contentHeight=this.height-this.option.titleHeight-(this.ctrlPanel?this.option.ctrlHeight:0);this.contentPanel.css("height",this.contentHeight+"px")},setTitle:function(t,i,n){var e=null,s;if(ui.core.type(t)==="string"){e=$("<span class='font-highlight' />").text(t);if(i!==false){i=true}}else if(ui.core.isDomObject(t)){e=$(t)}else if(ui.core.isJQueryObject(t)){e=t}this.titlePanel.empty();s=$("<div class='title-inner-panel' />");s.append(e);if(i){s.append($("<hr class='cw-title-text-spline background-highlight' />"))}this.titlePanel.append(s);var o=0;if(ui.core.type(n)==="array"){for(;o<n.length;o++){this.titlePanel.addClass(n[o])}}else if(ui.core.isPlainObject(n)){this.titlePanel.css(n)}},_calculateSize:function(t,i){if(!$.isNumeric(t)){t=ui.core.root.clientWidth}if(!$.isNumeric(i)){i=ui.core.root.clientHeight}var n=this.option.width;var e=i*.85;if(this.height>e){if(this.height>i){e=i}else{e=this.height}}if(n>t){n=t}this.setSizeLocation(n,e,t,i)},setSizeLocation:function(t,i,n,e){if(!$.isNumeric(n)){n=ui.core.root.clientWidth}if(!$.isNumeric(e)){e=ui.core.root.clientHeight}this._setSize(t,i);this.cwindow.css({top:(e-this.offsetHeight)/2+"px",left:(n-this.offsetWidth)/2+"px"});if(this.hasMask){this.mask.css("height",e+"px")}},_setSize:function(t,i,n){var e=parseInt(this.cwindow.css("border-top-width"),10)||0,s=parseInt(this.cwindow.css("border-bottom-width"),10)||0,o=parseInt(this.cwindow.css("border-left-width"),10)||0,a=parseInt(this.cwindow.css("border-right-width"),10)||0;if($.isNumeric(t)&&t>0){this.offsetWidth=t;this.width=this.offsetWidth-o-a;this.cwindow.css("width",this.width+"px")}if($.isNumeric(i)&&i>0){this.offsetHeight=i;this.height=this.offsetHeight-e-s;this.cwindow.css("height",this.height+"px");this._updateContentPanelHeight()}if(n!==false)this.fire(h)},show:function(){this.fire(n);if(this.animating||this.isOpened){return}var t=a[this.option.show];if($.isFunction(t)){t.call(this);this.animating=true;return this.animator.start()}},hide:function(){this.fire(s);if(this.animating||!this.isOpened){return}var t=c[this.option.hide];if($.isFunction(t)){t.call(this);this.animating=true;return this.animator.start()}},done:function(){this.fire(s);if(this.animating||!this.isOpened){return}var t=c[this.option.done];if($.isFunction(t)){t.call(this);this.animating=true;return this.animator.start()}},_asyncCall:function(t,i){var n=null;if($.isFunction(this[t])){n=this[t].call(this);if(n&&$.isFunction(i)){n.done(i)}}},onOpened:function(){this.animating=false;this.isOpened=true;this.fire(e)},onClosed:function(){this.animating=false;this.isOpened=false;this.cwindow.css("display","none");if(this.hasMask){$(document.body).css("overflow",this._oldBodyOverflow);this.mask.css("display","none")}this.fire(o)},openMask:function(){var t=$(document.body),i;if(this.hasMask){this._oldBodyOverflow=t.css("overflow");t.css("overflow","hide");this.mask.css("height",ui.core.root.clientHeight+"px");i=this.animator[1];i.begin=0;i.end=70;i.onChange=function(t){this.target.css({opacity:t/100,filter:"Alpha(opacity="+t+")"})};this.mask.css("display","block")}},closeMask:function(){var t;if(this.hasMask){t=this.animator[1];t.begin=70;t.end=0;t.onChange=function(t){this.target.css({filter:"Alpha(opacity="+t+")",opacity:t/100})}}},getCurrentLocation:function(){var t=this.cwindow.offset();return t},getCurrentOpacity:function(){}});$.fn.putWindow=function(t){if(!this||this.length==0){return null}return r(t,this)};ui.win={createUrlWindow:function(t){var i=$("<iframe class='content-frame' frameborder='0' scrolling='auto' />");if(ui.core.type(t.src)==="string"){i.prop("src",t.src)}return r(t,i)},setShowStyle:function(t,i){if(ui.core.type(t)==="string"&&t){if($.isFunction(i)){a[t]=i}}},setHideStyle:function(t,i){if(ui.core.type(t)==="string"&&t){if($.isFunction(i)){c[t]=i}}}}})();